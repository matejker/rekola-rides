{"version":3,"sources":["img/rides_heatmap.png","img/drive_rides_heatmap.png","img/all_rides_heatmap.png","img/rides_workdays.png","img/rides_weekends.png","img/rides_workdays_proportions.png","img/rides_weekends_proportions.png","img/weather_vs_rides.png","img/ride_duration_frequency.png","img/ride_length_frequency.png","img/104_geo_clustered_stations.png","img/104_clustered_stations.png","img/endpoint_heatmap2.png","img/all_stations.png","img/mm1_queue.png","img/rides_prediction.png","img/github.png","Toggle.js","RekolaRides.js","RekolaClusters.js","RatesMap.js","colors.js","colorHeatmap.js","PredictionMap.js","StochasticRates.js","MarkovChain.js","Home.js","App.js","index.js"],"names":["module","exports","Toggle","values","checkedValue","setCheckedValue","id","name","React","createElement","className","type","value","onChange","v","Math","abs","indexOf","htmlFor","data-on","data-off","RekolaRides","weekendsValue","setWeekendsValue","useState","workdayValue","setWorkdayValue","heatmapValue","setHeatmapValue","Fragment","href","src","rides_workdays","rides_workdays_proportions","style","width","marginLeft","textAlign","InlineMath","rides_weekends","rides_weekends_proportions","weather_vs_rides","ride_duration_frequency","ride_length_frequency","checked","rides_heatmap","all_rides_heatmap","drive_rides_heatmap","RekolaClusters","clustering","setClustering","stations","setStations","endpoint_heatmap","all_stations","clustered_stations","geo_clustered_stations","tiers","1","2","3","4","RatesMap","cluster","setCluster","tier","setTier","functionType","setFunctionType","rentDensity","poisson_cdfs","rents","map","p","i","Poisson","round","poisson_fs","Empirical","empiric_fs","rentCDF","empiric_cdfs","returnDensity","returns","returnCDF","maxDiffReturn","k_s","cStatsReturn","maxDiffRent","cStatsRent","console","log","concat","height","t","LineChart","data","margin","top","right","bottom","left","Line","dataKey","dot","stroke","XAxis","YAxis","domain","Legend","layout","verticalAlign","align","Map","zoom","bounds","s","CircleMarker","center","radius","fillOpacity","color","key","onClick","TileLayer","attribution","url","colorSchema","ColorHeatmap","min","max","n","length","x","PredictionMap","props","Popup","tierMap","5","tierLength","StochasticRates","rentTier","rent_rates","r","reduce","sum","returnTier","return_rates","a","b","BlockMath","mm1Queue","alt","Link","to","MarkovChain","totalRides","setTotalRides","season","setSeason","productionRates","production_summer","production","attractionsRates","attractions_summer","attractions","rides_prediction","e","target","Home","App","Router","Switch","Route","exact","path","Date","getFullYear","github","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.75646fbc.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/rides_heatmap.1c454fc0.png\";","module.exports = __webpack_public_path__ + \"static/media/drive_rides_heatmap.8ffcb132.png\";","module.exports = __webpack_public_path__ + \"static/media/all_rides_heatmap.a6439ed9.png\";","module.exports = __webpack_public_path__ + \"static/media/rides_workdays.c5d26a32.png\";","module.exports = __webpack_public_path__ + \"static/media/rides_weekends.2bd14073.png\";","module.exports = __webpack_public_path__ + \"static/media/rides_workdays_proportions.2b672231.png\";","module.exports = __webpack_public_path__ + \"static/media/rides_weekends_proportions.330b78cc.png\";","module.exports = __webpack_public_path__ + \"static/media/weather_vs_rides.3ad08865.png\";","module.exports = __webpack_public_path__ + \"static/media/ride_duration_frequency.aa9109e4.png\";","module.exports = __webpack_public_path__ + \"static/media/ride_length_frequency.62aac75d.png\";","module.exports = __webpack_public_path__ + \"static/media/104_geo_clustered_stations.ea024baf.png\";","module.exports = __webpack_public_path__ + \"static/media/104_clustered_stations.4b7f6c91.png\";","module.exports = __webpack_public_path__ + \"static/media/endpoint_heatmap2.4abeffda.png\";","module.exports = __webpack_public_path__ + \"static/media/all_stations.e37fb48e.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/rides_prediction.87c1620a.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsSAAALEgHS3X78AAABCUlEQVQ4y2NgwA1YgFgGilkYSAD2QLwRiL8C8X8o/goVs2cgYOM0JE248DRcLloAxCeAOAmItwPxTyB+BMRPgPgPEK8A4gAgPgdViwJCoaaXobkIBliR2K1QtaHIBlyEChYREUaNULUXYAKKUIFfQCxGhAGyQPwXqgekl8EbyrlEQkw9guoB6WUIgnKuk2DAS6gekF4GMyjnNxCLEKFZESlKQXoZ2ID4HVRgFgHNTNDo/A/VA4+dTiCWB+JAIF4PxK5oGhmh0XYAyfZOZAUCQLwFaqIzEOdisf0mkua7QMyHrkAPiKPxOP8MVDMoBtRxKVIA4g4grsUidxyI5wGxKDHRpIpFjAubQgBhh0fbS2ebVAAAAABJRU5ErkJggg==\"","import React from \"react\";\nimport \"./toggle.css\";\n\nconst Toggle = (values, checkedValue, setCheckedValue, id, name) => {\n  const getOpposite = (v) =>\n    values.values[Math.abs(values.values.indexOf(v) - 1)];\n\n  return (\n    <div className={\"toggle\"}>\n      <label className=\"outer-toggle\">\n        <input\n          type={\"checkbox\"}\n          name={values.name}\n          id={values.id}\n          className={\"toggle-input\"}\n          value={values.checkedValue}\n          onChange={() => {\n            values.setCheckedValue(getOpposite(values.checkedValue));\n          }}\n        />\n        <label\n          htmlFor={values.id}\n          data-on={values.values[0]}\n          data-off={values.values[1]}\n          className=\"inner-toggle\"\n        />\n      </label>\n    </div>\n  );\n};\n\nexport default Toggle;\n","import React, { useState } from \"react\";\nimport { InlineMath } from \"react-katex\";\nimport Toggle from \"./Toggle\";\n\nimport rides_heatmap from \"./img/rides_heatmap.png\";\nimport drive_rides_heatmap from \"./img/drive_rides_heatmap.png\";\nimport all_rides_heatmap from \"./img/all_rides_heatmap.png\";\nimport rides_workdays from \"./img/rides_workdays.png\";\nimport rides_weekends from \"./img/rides_weekends.png\";\nimport rides_workdays_proportions from \"./img/rides_workdays_proportions.png\";\nimport rides_weekends_proportions from \"./img/rides_weekends_proportions.png\";\nimport weather_vs_rides from \"./img/weather_vs_rides.png\";\nimport ride_duration_frequency from \"./img/ride_duration_frequency.png\";\nimport ride_length_frequency from \"./img/ride_length_frequency.png\";\n\nfunction RekolaRides() {\n  const [weekendsValue, setWeekendsValue] = useState(\"Abs.\");\n  const [workdayValue, setWorkdayValue] = useState(\"Abs.\");\n  const [heatmapValue, setHeatmapValue] = useState(\"bike\");\n\n  return (\n    <>\n      <h2 id=\"intro\">2. Analysis of Rekola bike sharing in Bratislava</h2>\n\n      <h3 id=\"data\">2.1. Data</h3>\n      <p>\n        In this project, I have scraped this <em>publicly available</em> map\n        through their API and every 10 minutes I made a snapshot of the\n        available bikes at the stations. Once a bike is in use or is out of\n        service, it is not present on the map. Based on this continues cycle\n        where bikes disappear and reappear on the map (API snapshot), I have\n        constructed rides. A ride consists of start and end position, duration\n        of a ride (from 10 minutes to 8 hours{\" \"}\n        <sup><a href=\"#40min\">1</a></sup>\n        ) and obviously the bike which has been used.\n      </p>\n\n      <p>\n        Data has been collected over 300 days throughout the year including all\n        seasons - from autumn 2022 to winter 2024, therefore, capturing all\n        kinds of weather conditions and mobility patterns.\n      </p>\n\n      <p>\n        Additionally, to compare mobility patterns with historical weather data,\n        I had used Meteostat [1] Python library. Meteostat offers historical\n        weather data for numerous world location, including Bratislava{\" \"}\n        <sup>\n          <a href=\"#meteostat\">2</a>\n        </sup>\n        , on hourly, daily and monthly bases. Data contains information about\n        average daily temperature (°C), precipitation total (mm), average wind\n        speed (km/h) and peak wind gust (km/h).\n      </p>\n\n      <h3 id=\"stats\">2.2. Mobility patterns</h3>\n      <p>\n        Over the scope of months scraping the API, I have collected over 130K\n        rides. Here are few observations.\n      </p>\n      <p>\n        Cycling similarly to other types of transport in the city, is not evenly\n        distributed over the week. Workdays (Monday to Friday) are in general\n        more popular days for cycling, then weekends. A year average for\n        workdays is about 500 rides, while for weekends it is about 300 rides.\n        More over, the distribution of rides over the day is also different for\n        workdays and weekends.\n      </p>\n\n      <div className=\"center\">\n        <Toggle\n          values={[\"Abs.\", \"Prop.\"]}\n          checkedValue={workdayValue}\n          setCheckedValue={setWorkdayValue}\n          id={\"workday-toggle\"}\n          name={\"workday-toggle\"}\n        />\n        <img\n          src={\n            workdayValue === \"Abs.\"\n              ? rides_workdays\n              : rides_workdays_proportions\n          }\n          style={{ width: \"1000px\", marginLeft: \"-150px\" }}\n        />\n        <div style={{ textAlign: \"justify\" }}>\n          <span className=\"image-desc\">\n            Absolute values are calculated as <InlineMath>{`F^d_t`}</InlineMath>{\" \"}\n            number of rides at time t on a day d. Proportional values are\n            calculated as{\" \"}\n            <InlineMath>{`\\\\hat{F}^d_t = F^d_t / \\\\sum_{\\\\tau}F^d_\\\\tau`}</InlineMath>\n            .\n          </span>\n        </div>\n      </div>\n\n      <p>\n        During the workdays, it seems that many people are using bikes for\n        commuting to work and school, which matches the 8 hours work time, with\n        the peak starting at 7am and another more disperse peak at 4pm. This\n        bi-modal distribution is even more clear for proportion value plot.\n      </p>\n\n      <div className=\"center\">\n        <Toggle\n          values={[\"Abs.\", \"Prop.\"]}\n          checkedValue={weekendsValue}\n          setCheckedValue={setWeekendsValue}\n          id={\"weekend-toggle\"}\n          name={\"weekend-toggle\"}\n        />\n        <img\n          src={\n            weekendsValue === \"Abs.\"\n              ? rides_weekends\n              : rides_weekends_proportions\n          }\n          style={{ width: \"1000px\", marginLeft: \"-150px\" }}\n        />\n      </div>\n      <p>\n        On the other hand, over the weekends the usage of bikes is more equally\n        distributed with no sharp peak. Those observations match bike sharing\n        patterns seen in other cities, for instance Paris [2] and New York [3].\n      </p>\n\n      <h4 id={\"weather\"}>2.2.1. Weather</h4>\n      <p>\n        Weather and seasonality is in general the most determining factor on\n        users' cycling. During the winter time average number of rides drops to\n        200, while spring and autumn times are around 550, and summer peaks at\n        800 rides per day.\n      </p>\n      <div className=\"center\">\n        <img src={weather_vs_rides} />\n      </div>\n\n      <p>\n        There is a strong correlation (<em>~0.85</em>) between average daily\n        temperature and number of rides for both workdays and non-workdays\n        (including public holidays). Other factors (alone) such as precipitation\n        or wind speed / gusts do not seem to have a significant impact on the\n        number of rides, unsurprisingly all those factors have negative but\n        insignificant correlation (<em>~-0.20</em>).\n      </p>\n\n      <h4 id={\"durations\"}>2.2.2. Ride durations</h4>\n      <p>\n        When it comes to lengths and durations of rides, those travels are in\n        general shorter ones. Which supports the fact that bike rides tend to be\n        used for shorter distances in city. Also this is highly skewed, because\n        the city bikes are located in the city center, and therefore, rides from\n        suburban areas aren't possible, and most of the rides are at most from\n        the most distant station to the city center. However, the data is\n        generated as 10 minutes snapshots, therefore, the duration of a ride is\n        multiple of 10 with an overall <em>bin-midpoint</em> average of 22.71\n        minutes{\" \"}\n        <sup>\n          <a href=\"#avg\">4</a>\n        </sup>\n        .\n      </p>\n\n      <div className=\"center\">\n        <img\n          src={ride_duration_frequency}\n          style={{ width: \"1000px\", marginLeft: \"-150px\" }}\n        />\n      </div>\n\n      <p>\n        Although, the actual rides which users rode while renting the bike are{\" \"}\n        <strong>not</strong> publicly available, I had looked at the theoretical\n        shortest paths between start and end points. Then grouped those\n        theoretical shortest distances into 100m bins with their frequencies.\n        The theoretical average distance is 2.05km.\n      </p>\n\n      <p>\n        <em>\n          Theoretical shortest distance means if we take start and endpoint of a\n          ride, i.e. start and end node of the street network, we can calculate\n          the shortest distance, e.g. by using{\" \"}\n          <a href={\"https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm\"}>\n            Dijkstra's algorithm\n          </a>\n          . It as also neglects the type of the road, traffic, etc. calm one way\n          street is treated the same as busy road. Ultimately, this does not\n          mean that users actually took that path, actually in general cyclist\n          do not take the most direct path [6], but it is as close we can get\n          using this dataset.\n        </em>\n      </p>\n\n      <div className=\"center\">\n        <img\n          src={ride_length_frequency}\n          style={{ width: \"1000px\", marginLeft: \"-150px\" }}\n        />\n      </div>\n\n      <h4 id=\"heatmap\">2.2.3. Heatmap</h4>\n      <p>\n        Future more, those shortest paths can be then plotted on the city map,\n        which forms a sort of heatmap of most common <em>theoretical</em>{\" \"}\n        routes.\n      </p>\n\n      <p>\n        The heatmap is created by overlaying all the theoretical shortest paths\n        on top of each other and this forms a sort of{\" \"}\n        <em>betweenness centrality</em> of the street network. The brighter the\n        color, the more paths pass through that street segment. This can be used\n        to identify the most common and important routes.\n      </p>\n\n      <div className=\"center\">\n        <ul className={\"inline\"}>\n          <li>\n            <input\n              type={\"radio\"}\n              value={\"bike\"}\n              id={\"radio-bike\"}\n              checked={heatmapValue === \"bike\"}\n              onChange={() => setHeatmapValue(\"bike\")}\n            />\n            <label htmlFor={\"radio-bike\"}>Bike</label>\n          </li>\n          <li>\n            <input\n              type={\"radio\"}\n              value={\"car\"}\n              id={\"radio-car\"}\n              checked={heatmapValue === \"car\"}\n              onChange={() => setHeatmapValue(\"car\")}\n            />\n            <label htmlFor={\"radio-car\"}>Car</label>\n          </li>\n          <li>\n            <input\n              type={\"radio\"}\n              value={\"all\"}\n              id={\"radio-all\"}\n              checked={heatmapValue === \"all\"}\n              onChange={() => setHeatmapValue(\"all\")}\n            />\n            <label htmlFor={\"radio-all\"}>All</label>\n          </li>\n        </ul>\n        <img\n          src={\n            heatmapValue === \"bike\"\n              ? rides_heatmap\n              : heatmapValue === \"all\"\n                ? all_rides_heatmap\n                : drive_rides_heatmap\n          }\n          style={{ width: \"960px\", marginLeft: \"-130px\" }}\n        />\n      </div>\n\n      <p>\n        Switching between bike and car mode, it shows the difference between the\n        most common routes. Those modes are different OSM filters, where{\" \"}\n        <a\n          href={\n            \"https://github.com/gboeing/osmnx/blob/main/osmnx/_overpass.py#L72-L77\"\n          }\n        >\n          bike mode\n        </a>{\" \"}\n        is optimized for cycling and{\" \"}\n        <a\n          href={\n            \"https://github.com/gboeing/osmnx/blob/main/osmnx/_overpass.py#L39-L46\"\n          }\n        >\n          car mode\n        </a>{\" \"}\n        is optimized shows all the streets where car are allowed. All mode shows{\" \"}\n        <a\n          href={\n            \"https://github.com/gboeing/osmnx/blob/main/osmnx/_overpass.py#L89-L92\"\n          }\n        >\n          all the streets\n        </a>\n        . For example on the bike mode, you can't see highways and bridges such\n        as <em>Most SNP</em> or <em>Most Apollo</em> (2<sup>nd</sup> and 3\n        <sup>rd</sup> bridges from left) looks completely different.\n      </p>\n\n      <p>\n        Most important observations for different modes are that the bike mode\n        heatmap is <em>less direct</em>&nbsp; compared to the all streets mode\n        heatmap. This is because many of the roads are primarily designed for\n        cars and bikes has to find more indirect routes. It can be seen on the\n        example of <em>Most SNP</em> or &nbsp; <em>Prístavný most</em> which are\n        totally car centric and not bike friendly. Cyclist (based on shortest\n        paths) find it easier to use the <em>Starý most</em> instead. On the{\" \"}\n        <em>all streets</em> mode we can see many more paths passing{\" \"}\n        <em>Most SNP</em>. If they were allowed to use <em>Most SNP</em> in the\n        same way as car does, we would likely to see more cyclist passing that\n        bridge.\n      </p>\n\n      <h3 id={\"observations\"}>2.3. Observations</h3>\n      <p>\n        There is roughly the same number of available bikes and stations to park\n        (~300) [7]. The station network is very dense and many stations are in a\n        close proximity to another stations, often less than 100m. Such a set up\n        could be convenient for bike returns as user can return the bike into\n        large pool of possible places. On the other hand, such equal number of\n        bikes and stations tend to favour some \"central\" stations - hubs, makes\n        hard to find available bikes at all stations. For example station{\" \"}\n        <em>Eurovea 1</em> attracts (and also produces) about 2.5% of all rides.\n      </p>\n\n      <p>\n        There is a reason to believe that Rekola is not <em>re-balancing</em>{\" \"}\n        the bikes in between the stations. There is a slight discrepancy between\n        bikes rentals and returns. This discrepancy averages for about 0.22% of\n        total rides for all stations. This is likely to be linked to data\n        collection process, where some longer rides aren't counted, also bikes\n        can be reported to be broken, etc.\n      </p>\n\n      <h3 id={\"conclusion\"}>2.5. Conclusion</h3>\n      <p>\n        Bratislava is (not yet) know for its residents to use bikes as a primary\n        mode of transport. The daily average of rides is about 500, which for a\n        city of half a million population isn't tremendous number. (obviously,\n        there are other bike-sharing platforms and private bikes, etc.). It\n        shows that the cycling isn't an insignificant part of the city's\n        transport system, but helps us to understand important mobility patterns\n        and frequent routes.\n      </p>\n      <h3 className=\"reference\">References:</h3>\n      <ol className=\"reference\">\n        <li>\n          Christian Sebastian Lamprecht (2023) <em>\"Meteostat Python\"</em>.\n          0000-0003-3301-2852, &nbsp;\n          <a href=\"https://meteostat.net/en/\">link</a>\n        </li>\n        <li>\n          Nicolas Gast, Guillaume Massonnet, Daniël Reijsbergen, Mirco\n          Tribastone. (2015) &nbsp;\n          <em>\n            Probabilistic Forecasts of Bike-Sharing Systems for Journey\n            Planning.\n          </em>\n          &nbsp;The 24th ACM International Conference on Information and\n          Knowledge Management Oct 2015, Melbourne, Australia.\n          ff10.1145/2806416.2806569ff. ffhal-01185840f\n        </li>\n        <li>\n          Chiariotti, Federico, Chiara Pielli, Andrea Zanella, and Michele\n          Zorzi. (2018) &nbsp;\n          <em>A Dynamic Approach to Rebalancing Bike-Sharing Systems</em>.\n          &nbsp;Sensors 18, no. 2: 512. https://doi.org/10.3390/s18020512\n        </li>\n        <li>\n          Newman, M. E. J. (2010), <em>Networks: an introduction</em>, Oxford\n          University Press, Oxford; New York\n        </li>\n        <li>\n          Zhu S, Levinson D (2015){\" \"}\n          <em>\n            Do People Use the Shortest Path? An Empirical Test of Wardrop’s\n            First Principle.\n          </em>{\" \"}\n          PLOS ONE 10(8): e0134322. https://doi.org/10.1371/journal.pone.0134322\n        </li>\n        <li>\n          Wikipedia (2023), <em>Rekola</em> Wikimedia Foundation, &nbsp;\n          <a href={\"https://en.wikipedia.org/wiki/Rekola#Outside_of_the_Czech_Republic\"}>Wikipedia: Rekola#Outside_of_the_Czech_Republic</a>\n        </li>\n      </ol>\n\n      <ol className=\"foot-notes\">\n        <li id=\"40min\">\n          Snapshot is done every 10 minutes, so if a bike is rented and returned\n          within this timeframe, there is a chance, I missed the ride\n          completely. On the other hand, there is a scenario where a bike is\n          rented (rental is recorded), then returned and then immediately rented\n          by someone else (so it didn't appear in the next snapshot), in such a\n          case, I would take that as a one long ride. To prevent such scenarios,\n          I had set up the upper limit for all rides to max 8 hours, after that\n          the <em>ride</em> is discarded.\n        </li>\n        <li id=\"meteostat\">\n          The closest station in Meteostat for Bratislava city center is station\n          / point with ID=11816, which is Bratislava Ivanka.\n        </li>\n        <li id=\"avg\">\n          However, the snapshots are 10 minutes, hence, the bin size is 10. The\n          average can be estimated as mid-interval value (5, 15, 25...) weighted\n          with the frequency, therefore, 22.71 minutes or using &nbsp;\n          <a href=\"https://en.wikipedia.org/wiki/Interval_arithmetic\">\n            interval arithmetic\n          </a>\n          , average lies in interval 17.71 - 27.71 minutes.\n        </li>\n      </ol>\n    </>\n  );\n}\n\nexport default RekolaRides;\n","import React, { useState } from \"react\";\n\nimport geo_clustered_stations from \"./img/104_geo_clustered_stations.png\";\nimport clustered_stations from \"./img/104_clustered_stations.png\";\nimport endpoint_heatmap from \"./img/endpoint_heatmap2.png\";\nimport all_stations from \"./img/all_stations.png\";\n\nfunction RekolaClusters() {\n  const [clustering, setClustering] = useState(\"kmeans\");\n  const [stations, setStations] = useState(\"rides\");\n\n  return (\n    <>\n      <h2>3. Rekola station clusters</h2>\n\n      <p>\n        Rekola in Bratislava is operating as a dockless bikesharing service [1], which means that bike can be left at stations\n        regardless of the station's capacity. This is sort of hybrid between docked and dockless service. Often, dockerless\n        services allows you to park the bike anywhere, but Rekola has about 300 stations where you can park the bike. If\n        you park the bike outside the station, you will be charged a fee [2].\n      </p>\n      <p>\n        Rekola bikes seems to have a high precision tracking and for every aviailable bike, they record the location. This\n        location is often around the official stations, but there are some outliers. To see where the available bikes were\n        localed, following heatmap shows all the positions.\n      </p>\n\n      <div className=\"center\">\n        <ul className={\"inline\"}>\n          <li>\n            <input\n              type={\"radio\"}\n              value={\"rides\"}\n              id={\"radio-rides\"}\n              checked={stations === \"rides\"}\n              onChange={() => setStations(\"rides\")}\n            />\n            <label htmlFor={\"radio-rides\"}>Rides</label>\n          </li>\n          <li>\n            <input\n              type={\"radio\"}\n              value={\"stations\"}\n              id={\"radio-stations\"}\n              checked={stations === \"stations\"}\n              onChange={() => setStations(\"stations\")}\n            />\n            <label htmlFor={\"radio-stations\"}>Stations</label>\n          </li>\n        </ul>\n        <img\n          src={stations === \"rides\" ? endpoint_heatmap : all_stations}\n          style={{ width: \"1000px\", marginLeft: \"-150px\" }}\n        />\n        <div style={{ textAlign: \"justify\" }}>\n          <span className=\"image-desc\">\n            However, Rekola is a sort of mix of docker and dockerless service\n            and they record fairly precise bike location up to 5 digits of\n            latitude and longitude <sup><a href=\"#xkcd\">1</a></sup>. This can create a certain noise around stations.\n            There is a certain form on signal jamming around the Danube river, there is bunch of ride endpoints in\n            he river <sup><a href=\"#salzburg\">2</a></sup>.\n          </span>\n        </div>\n      </div>\n\n      <p>\n        Couple of observations can be made from the heatmap. First, even if Rekola punishes you for parking the bike outside\n        the station, there are still many bikes parked outside the station. Second, there are some stations that are\n        with a significant noise around them - bikes were parked in close proximity to the station. Lastly, this map\n        shows a sort of heatmap of station usage, the more frequently used are darker and have blurred surroundings,\n        while some stations are very light, meaning they are not used often.\n      </p>\n\n      <h3>3.1. Grouping stations into clusters</h3>\n\n      <p>\n        However, the total number of stations and bikes is roughly equal to 300 and some stations being very close to each\n        (e.g. in some cases there are 3 stations on the same square), it almost seems like a dockerless service. In order\n        to do some prediction analysis and investigate some patterns, it seems reasonable to reduce the number of stations.\n        I used two methods to cluster the stations, K-means clustering and regular grid of size roughly 500m x 500m - which\n        sounds like a reasonable distance to walk to get an available bike. Both clustering methods generated 104 \"station\"\n        (first I plot the grid and got 104 blocks, then I adjusted the k-means to get 104 clusters).\n        Similar method of clustering for dockerless services was used in paper by Hua et. al. [3]. The resulting cluster\n        centers are very similarly located and can be seen on the map below.\n      </p>\n\n      <div className=\"center\">\n        <ul className={\"inline\"}>\n          <li>\n            <input\n              type={\"radio\"}\n              value={\"kmeans\"}\n              id={\"radio-kmeans\"}\n              checked={clustering === \"kmeans\"}\n              onChange={() => setClustering(\"kmeans\")}\n            />\n            <label htmlFor={\"radio-kmeans\"}>K-means</label>\n          </li>\n          <li>\n            <input\n              type={\"radio\"}\n              value={\"geo\"}\n              id={\"radio-geo\"}\n              checked={clustering === \"geo\"}\n              onChange={() => setClustering(\"geo\")}\n            />\n            <label htmlFor={\"radio-geo\"}>Grid</label>\n          </li>\n        </ul>\n        <img\n          src={clustering === \"kmeans\" ? clustered_stations : geo_clustered_stations}\n          style={{ width: \"1000px\", marginLeft: \"-150px\" }}\n        />\n        <div style={{ textAlign: \"justify\" }}>\n          <span className=\"image-desc\">\n            In order to reduce total number of stations, we can cluster them. I\n            used two methods, K-means clustering and regular grid of size\n            roughly 500m x 500m (first, I plot grid, then if a station was in\n            the grid cell, I put a cluster center there). Both clustering\n            methods generated 104 \"station\".\n          </span>\n        </div>\n      </div>\n\n      <h3>3.2. Conclusion</h3>\n      <p>\n        This clustering will be essential stepping stone for further analysis. The clustering will allow us to reduce the\n        number of stations and thus reduce the number of parameters in the model. I assume that user incentive to use\n        bike wouldn't change rapidly if the station is moved up to 250m.\n      </p>\n\n      <h3 className=\"reference\">References:</h3>\n      <ol className=\"reference\">\n        <li>\n          Wikipedia (2023), <em>Rekola</em> Wikimedia Foundation, &nbsp;\n          <a href={\"https://en.wikipedia.org/wiki/Rekola#Outside_of_the_Czech_Republic\"}>Wikipedia: Rekola#Outside_of_the_Czech_Republic</a>\n        </li>\n        <li>\n          Rekola Bikesharing SK s.r.o.,{\" \"}\n          <em>\"Rekola - Discover city with Rekola Bikesharing</em>, &nbsp;\n          <a href=\"https://www.rekola.sk/\">link</a>\n        </li>\n        <li>\n          Mingzhuang Hua, Jingxu Chen, Xuewu Chen, Zuoxian Gan, Pengfei Wang, De Zhao (2020).\n          <em>Forecasting usage and bike distribution of dockless bike-sharing using journey data</em>.\n          IET Intelligent Transport Systems. 14. 10.1049/iet-its.2020.0305.\n        </li>\n      </ol>\n\n      <ol className=\"foot-notes\">\n        <li id=\"xkcd\">\n          5 decimal digits in longitude / latitude according to{\" \"}\n          <a href={\"https://xkcd.com/2170/\"}>xkcd</a>\n          &nbsp;means \"\n          <em>\n            you are pointing to a specific person in a room, but since you\n            didn't include datum information we can't tell who\n          </em>\n          \". In other words, it is very precise.\n        </li>\n        <li id=\"salzburg\">\n          Fun fact: One of the ride endpoint is recorded in Salzburg, which is\n          300 km away from Bratislava.\n        </li>\n      </ol>\n    </>\n  );\n}\n\nexport default RekolaClusters;\n","import React, { useState } from \"react\";\nimport { Map, TileLayer, CircleMarker } from \"react-leaflet\";\nimport \"leaflet-draw/dist/leaflet.draw.css\";\nimport \"leaflet/dist/leaflet.css\";\nimport { LineChart, Line, Legend, XAxis, YAxis } from \"recharts\";\n\nimport empiric_cdfs from \"./data/empiric_cdfs.json\";\nimport empiric_fs from \"./data/empiric_fs.json\";\nimport poisson_cdfs from \"./data/poisson_cdfs.json\";\nimport poisson_fs from \"./data/poisson_fs.json\";\nimport stations from \"./data/clustered_stations.json\";\nimport k_s from \"./data/k_s.json\";\n\nconst tiers = {\n  1: \"Quiet period: 7pm-6am\",\n  2: \"Morning rush hours: 6am-9am\",\n  3: \"Daytime: 9am-2pm\",\n  4: \"Afternoon rush hours: 2pm-7pm\",\n};\n\nconst RatesMap = () => {\n  const [cluster, setCluster] = useState(43);\n  const [tier, setTier] = useState(2);\n  const [functionType, setFunctionType] = useState(\"density\");\n\n  const rentDensity = poisson_cdfs.rents[cluster][tier].map((p, i) => ({\n    rents: i,\n    Poisson: Math.round(poisson_fs.rents[cluster][tier][i] * 10000) / 10000,\n    Empirical: Math.round(empiric_fs.rents[cluster][tier][i] * 10000) / 10000,\n  }));\n\n  const rentCDF = poisson_cdfs.rents[cluster][tier].map((p, i) => ({\n    rents: i,\n    Poisson: Math.round(p * 10000) / 10000,\n    Empirical: Math.round(empiric_cdfs.rents[cluster][tier][i] * 10000) / 10000,\n  }));\n\n  const returnDensity = poisson_cdfs.returns[cluster][tier].map((p, i) => ({\n    returns: i,\n    Poisson: Math.round(poisson_fs.returns[cluster][tier][i] * 10000) / 10000,\n    Empirical: Math.round(empiric_fs.returns[cluster][tier][i] * 10000) / 10000,\n  }));\n\n  const returnCDF = poisson_cdfs.returns[cluster][tier].map((p, i) => ({\n    returns: i,\n    Poisson: Math.round(p * 10000) / 10000,\n    Empirical:\n      Math.round(empiric_cdfs.returns[cluster][tier][i] * 10000) / 10000,\n  }));\n\n  const maxDiffReturn =\n    Math.round(k_s.returns[cluster][tier][0] * 10000) / 10000;\n  const cStatsReturn =\n    Math.round(k_s.returns[cluster][tier][1] * 10000) / 10000;\n\n  const maxDiffRent = Math.round(k_s.rents[cluster][tier][0] * 10000) / 10000;\n  const cStatsRent = Math.round(k_s.rents[cluster][tier][1] * 10000) / 10000;\n\n  console.log(\n    `Kolmogorov–Smirnov test for ${cluster} cluster, ${tier} tier and return: ${maxDiffReturn}, ${cStatsReturn}, Accepting hypothesis? ${maxDiffReturn < cStatsReturn}`,\n  );\n  console.log(\n    `Kolmogorov–Smirnov test for ${cluster} cluster, ${tier} tier and return: ${maxDiffRent}, ${cStatsRent}, Accepting hypothesis? ${maxDiffRent < cStatsRent}`,\n  );\n\n  return (\n    <>\n      <div style={{ width: \"100%\", height: \"500px\", textAlign: \"center\" }}>\n        <ul className={\"inline\"}>\n          {[1, 2, 3, 4].map((t) => (\n            <>\n              <li>\n                <input\n                  type={\"radio\"}\n                  value={\"tier\"}\n                  id={`radio-${t}`}\n                  checked={tier === t}\n                  onChange={() => setTier(t)}\n                />\n                <label htmlFor={`radio-${t}`}>{tiers[t]}</label>\n              </li>\n            </>\n          ))}\n        </ul>\n        <div\n          className=\"left\" style={{ width: \"500px\", height: \"350px\", textAlign: \"center\" }}\n        >\n          <h3>Rents</h3>\n          <LineChart\n            width={450}\n            height={250}\n            data={functionType === \"density\" ? rentDensity : rentCDF}\n            margin={{ top: 5, right: 20, bottom: 5, left: 0 }}\n          >\n            <Line\n              type={functionType === \"cdf\" ? \"stepAfter\" : \"monotone\"}\n              dataKey=\"Poisson\"\n              dot={functionType === \"cdf\"}\n              stroke=\"#007185\"\n            />\n            <Line\n              type={functionType === \"cdf\" ? \"stepAfter\" : \"monotone\"}\n              dataKey=\"Empirical\"\n              dot={functionType === \"cdf\"}\n              stroke=\"#C7511F\"\n            />\n            <XAxis dataKey=\"rents\" />\n            <YAxis domain={[0, 1]} />\n            <Legend\n              layout={\"horizontal\"}\n              verticalAlign={\"top\"}\n              align={\"right\"}\n              height={25}\n            />\n            {/*<Tooltip />*/}\n          </LineChart>\n        </div>\n\n        <div\n          className=\"right\"\n          style={{ width: \"500px\", height: \"350px\", textAlign: \"center\" }}\n        >\n          <h3>Returns</h3>\n          <LineChart\n            width={450}\n            height={250}\n            data={functionType === \"density\" ? returnDensity : returnCDF}\n            margin={{ top: 5, right: 20, bottom: 5, left: 0 }}\n          >\n            <Line\n              type={functionType === \"cdf\" ? \"stepAfter\" : \"monotone\"}\n              dataKey=\"Poisson\"\n              dot={functionType === \"cdf\"}\n              stroke=\"#007185\"\n            />\n            <Line\n              type={functionType === \"cdf\" ? \"stepAfter\" : \"monotone\"}\n              dataKey=\"Empirical\"\n              dot={functionType === \"cdf\"}\n              stroke=\"#C7511F\"\n            />\n            <XAxis dataKey=\"returns\" />\n            <YAxis domain={[0, 1]} />\n            <Legend\n              layout={\"horizontal\"}\n              verticalAlign={\"top\"}\n              align={\"right\"}\n              height={25}\n            />\n            {/*<Tooltip />*/}\n          </LineChart>\n        </div>\n        <ul className={\"inline\"}>\n          <li>\n            <input\n              type={\"radio\"}\n              value={\"density\"}\n              id={\"radio-density\"}\n              checked={functionType === \"density\"}\n              onChange={() => setFunctionType(\"density\")}\n            />\n            <label htmlFor={\"radio-density\"}>Density function</label>\n          </li>\n          <li>\n            <input\n              type={\"radio\"}\n              value={\"cdf\"}\n              id={\"radio-cdf\"}\n              checked={functionType === \"cdf\"}\n              onChange={() => setFunctionType(\"cdf\")}\n            />\n            <label htmlFor={\"radio-cdf\"}>\n              Cumulative distribution function\n            </label>\n          </li>\n        </ul>\n      </div>\n      <></>\n      <Map\n        style={{ height: \"50vh\" }}\n        zoom={15}\n        bounds={[\n          [48.16, 17.21],\n          [48.12, 17.0],\n        ]}\n      >\n        {stations.map((s, i) => {\n          return (\n            <CircleMarker\n              center={s}\n              radius={4}\n              fillOpacity={0.95}\n              color={cluster === i ? \"#C7511F\" : \"#007185\"}\n              key={i}\n              onClick={() => setCluster(i)}\n            />\n          );\n        })}\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png\"\n        />\n      </Map>\n    </>\n  );\n};\n\nexport default RatesMap;\n","export const colorSchema = [\n  \"#007185\",\n  \"#096f80\",\n  \"#136e7b\",\n  \"#1c6c76\",\n  \"#266b72\",\n  \"#2f696d\",\n  \"#396868\",\n  \"#426663\",\n  \"#4c655e\",\n  \"#556359\",\n  \"#5f6254\",\n  \"#686050\",\n  \"#725f4b\",\n  \"#7b5d46\",\n  \"#855c41\",\n  \"#8e5a3c\",\n  \"#985937\",\n  \"#a15732\",\n  \"#ab562e\",\n  \"#b45429\",\n  \"#be5324\",\n  \"#c7511f\",\n];\n","import React from \"react\";\nimport { colorSchema } from \"./colors\";\n\nexport const ColorHeatmap = (values) => {\n  const min = Math.min(...values);\n  const max = Math.max(...values);\n  const n = colorSchema.length - 1;\n\n  return values.map(\n    (x) => colorSchema[Math.round((n * (x - min)) / (max - min))],\n  );\n};\n\nexport const ColorHeatmapValues = (values) => {\n  const min = Math.min(...values);\n  const max = Math.max(...values);\n  const n = colorSchema.length - 1;\n\n  return (\n    <table style={{ width: \"100%\" }}>\n      <tr>\n        {colorSchema.map((color, i) => (\n          <td\n            style={{\n              backgroundColor: color,\n              width: `${1000 / (n + 1)}px`,\n              color: \"#f8f8f9\",\n            }}\n          >\n            {Math.round((i * (max - min)) / n)}\n          </td>\n        ))}\n      </tr>\n    </table>\n  );\n};\n","import React from \"react\";\nimport { Map, TileLayer, CircleMarker, Popup } from \"react-leaflet\";\nimport \"leaflet-draw/dist/leaflet.draw.css\";\nimport \"leaflet/dist/leaflet.css\";\nimport { ColorHeatmap } from \"./colorHeatmap\";\n\nimport stations from \"./data/clustered_stations.json\";\n\nconst PredictionMap = (props) => {\n  return (\n    <>\n      <Map\n        style={{ height: \"80vh\" }}\n        zoom={16}\n        bounds={[\n          [48.16, 17.21],\n          [48.12, 17.0],\n        ]}\n      >\n        {stations.map((s, i) => {\n          return (\n            <CircleMarker\n              center={s}\n              radius={4}\n              key={i}\n              fillOpacity={0.95}\n              color={ColorHeatmap(props.rents)[i]}\n            >\n              <Popup>\n                Expected rents: {Math.round(props.rents[i])}\n                <br />\n                Expected returns: {Math.round(props.returns[i])}\n              </Popup>\n            </CircleMarker>\n          );\n        })}\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png\"\n        />\n      </Map>\n    </>\n  );\n};\n\nexport default PredictionMap;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { InlineMath, BlockMath } from \"react-katex\";\nimport \"katex/dist/katex.min.css\";\nimport RatesMap from \"./RatesMap\";\nimport PredictionMap from \"./PredictionMap\";\n\nimport return_rates from \"./data/return_rates.json\";\nimport rent_rates from \"./data/rent_rates.json\";\n\nimport mm1Queue from \"./img/mm1_queue.png\";\n\nconst tierMap = {\n  1: \"Quiet period: 7pm-6am\",\n  2: \"Morning rush hours: 6am-9am\",\n  3: \"Daytime: 9am-2pm\",\n  4: \"Afternoon rush hours: 2pm-7pm\",\n  5: \"Full day\",\n};\n\nconst tierLength = {\n  1: 11,\n  2: 3,\n  3: 5,\n  4: 5,\n};\n\nfunction StochasticRates() {\n  const [tier, setTier] = useState(2);\n\n  const rentTier =\n    tier === 5\n      ? rent_rates.map((r) =>\n          [1, 2, 3, 4].reduce((sum, i) => sum + r[i] * tierLength[i], 0),\n        )\n      : rent_rates.map((r) => r[tier] * tierLength[tier] || 0);\n  const returnTier =\n    tier === 5\n      ? return_rates.map((r) =>\n          [1, 2, 3, 4].reduce((sum, i) => sum + r[i] * tierLength[i], 0),\n        )\n      : return_rates.map((r) => r[tier] * tierLength[tier] || 0);\n\n  console.log(returnTier.reduce((a, b) => a + b, 0));\n  console.log(rentTier.reduce((a, b) => a + b, 0));\n  return (\n    <>\n      <h2>5. Stochastic rates</h2>\n      <p>\n        The bike sharing is in heart a stochastic process. In this section,\n        I will model the rentals and returns as time-inhomogeneous Poisson process. This will allow me to predict\n        the demand and supply of bikes for each station cluster. More importantly, look at the possible demands\n        when station clusters are empty, therefore, suggests some rebalancing strategies.\n      </p>\n      <p>\n        The rates of rentals and returns are assumed to be\n        Poisson distributed. Each individual station cluster is modelled as a\n        separate continuous-time infinite Markov chain, specifically map to a\n        special case of <em>Birth and death process</em> of Queuing network{\" \"}\n        <a href=\"https://en.wikipedia.org/wiki/M/M/1_queue\">M/M/1</a>. [1]\n      </p>\n\n      <p>\n        However, Rekola is a sort of dockerless bike-sharing system, there is no\n        restriction on the number of bikes which can be parked at a station. Let{\" \"}\n        <InlineMath>{`n`}</InlineMath> be number of bikes at a station, then the\n        arrival / return of a bike happens with{\" \"}\n        <InlineMath>{`\\\\lambda`}</InlineMath> rate and departure / rent with{\" \"}\n        <InlineMath>{`\\\\mu`}</InlineMath> rate. [2]\n      </p>\n      <BlockMath>{`q(n, n + 1) = \\\\lambda, n \\\\ge 0`}</BlockMath>\n      <BlockMath>{`q(n, n-1) = \\\\mu, n \\\\ge 1`}</BlockMath>\n      <div className=\"center\">\n        <img src={mm1Queue} alt=\"M/M/1 queue.\" />\n        <div style={{ textAlign: \"justify\" }}>\n          <span className=\"image-desc\">\n            M/M/1 queue with arrival rate <InlineMath>{`\\\\lambda`}</InlineMath>{\" \"}\n            and departure rate <InlineMath>{`\\\\mu`}</InlineMath>. Source of the\n            image{\" \"}\n            <a href=\"https://en.wikipedia.org/wiki/M/M/1_queue\">Wikipedia</a>.\n          </span>\n        </div>\n      </div>\n\n      <p>\n        From <Link to={\"/\"}>previous section</Link> is clear that\n        number of rides is highly seasonal, it varies throughout the day and\n        workdays differs from weekends / public holidays. In order to avoid\n        those effects, I look at rides which happened between April to September\n        and focus only on workdays. To capture which stations are more popular\n        during different times of the day, I divide the day into 4{\" \"}\n        <em>tiers</em>\n        &nbsp;(<InlineMath>{`\\\\tau=\\\\{T_1, T_2, T_3, T_4\\\\}`}</InlineMath>) as\n        follows:\n      </p>\n      <ul>\n        <li>\n          <strong>Quiet period</strong> <InlineMath>{`T_1`}</InlineMath>:\n          7pm-6am\n        </li>\n        <li>\n          <strong>Morning rush hours</strong> <InlineMath>{`T_2`}</InlineMath>:\n          6am-9am\n        </li>\n        <li>\n          <strong>Daytime</strong> <InlineMath>{`T_3`}</InlineMath>: 9am-2pm\n        </li>\n        <li>\n          <strong>Afternoon rush hours</strong> <InlineMath>{`T_4`}</InlineMath>\n          : 2pm-7pm\n        </li>\n      </ul>\n\n      <p>\n        To get more comprehensive view of the bike flow, I clustered the\n        stations into 104 clusters &nbsp;\n        <InlineMath>{`\\\\xi = 1,...,104`}</InlineMath>, based on the{\" \"}\n        <Link to={\"/rekola-clusters\"}>K-mean</Link> clustering. Let's &nbsp;\n        <InlineMath>{`\\\\lambda_{\\\\xi}(\\\\tau)`}</InlineMath> be the rate of\n        rentals at station cluster <InlineMath>{`\\\\xi`}</InlineMath> during time\n        tier <InlineMath>{`\\\\tau`}</InlineMath>, and{\" \"}\n        <InlineMath>{`\\\\mu_{\\\\xi}(\\\\tau)`}</InlineMath> be the rate of returns\n        at station cluster &nbsp;<InlineMath>{`\\\\xi`}</InlineMath> during time\n        tier <InlineMath>{`\\\\tau`}</InlineMath>. Then the{\" \"}\n        <em>transition rate matrix</em>{\" \"}\n        <InlineMath>{`Q_{\\\\xi}(\\\\tau)`}</InlineMath> for cluster{\" \"}\n        <InlineMath>{`\\\\xi`}</InlineMath> at <InlineMath>{`\\\\tau`}</InlineMath>{\" \"}\n        is defined as:\n      </p>\n\n      <div style={{ width: \"1000px\", marginLeft: \"-150px\", textAlign: \"center\" }}>\n        <BlockMath>{`Q_{\\\\xi}(\\\\tau) =\n              \\\\begin{pmatrix}\n              -\\\\lambda_{\\\\xi}(\\\\tau) & \\\\lambda_{\\\\xi}(\\\\tau) &  & & \\\\\\\\\n              \\\\mu_{\\\\xi}(\\\\tau) & -(\\\\mu_{\\\\xi}(\\\\tau) +\\\\lambda_{\\\\xi}(\\\\tau)) & \\\\lambda_{\\\\xi}(\\\\tau) &  &\\\\\\\\\n                & \\\\mu_{\\\\xi}(\\\\tau) & -(\\\\mu_{\\\\xi}(\\\\tau) +\\\\lambda_{\\\\xi}(\\\\tau)) & \\\\lambda_{\\\\xi}(\\\\tau) & \\\\\\\\\n               & & & & \\\\ddots\n              \\\\end{pmatrix}`}</BlockMath>\n      </div>\n      <h3>5.1. Calculating rates</h3>\n      <p>\n        The rates of rentals and returns are estimated from the data. However\n        the Rekola system is not limited by number of available slots at the\n        stations, we aren't limited on returns. While if there is no available\n        bike at a station cluster, it doesn't make sense to infer rent rates on\n        snapshots of empty stations.\n      </p>\n      <p>\n        Let <InlineMath>{`A_{\\\\xi}(\\\\tau)`}</InlineMath> be the set of\n        observations of returns at station cluster &nbsp;\n        <InlineMath>{`\\\\xi`}</InlineMath> during time tier{\" \"}\n        <InlineMath>{`\\\\tau`}</InlineMath>\n      </p>\n      <BlockMath>\n        {`\\\\lambda_{\\\\xi}(\\\\tau) = \\\\frac{1}{|\\\\tau|}\\\\sum_{d \\\\in A_{\\\\xi}(\\\\tau)} \\\\#\\\\ arrivals\\\\ during \\\\ \\\\tau`}\n      </BlockMath>\n      <p>\n        For bike <em>departures</em> it is more complicated as we want to\n        account only for snapshots when there is at least one bike at given\n        station cluster, therefore, let <InlineMath>{`D_{\\\\xi}(\\\\tau)`}</InlineMath> be\n        the set of observations of rentals at station cluster\n      </p>\n      <BlockMath>\n        {`\\\\mu_{\\\\xi}(\\\\tau) = \\\\frac{\\\\sum_{d \\\\in D_{\\\\xi}(\\\\tau)} \\\\#\\\\ departures\\\\ during \\\\ \\\\tau}\n                {\\\\sum_{d \\\\in D_{\\\\xi}(\\\\tau)} \\\\#\\\\ 'valid'\\\\ snapshots\\\\ during\\\\ \\\\tau}`}\n      </BlockMath>\n      <p>\n        However, the time triers are not equally length, therefore, they are\n        calculated as number of arrivals / departures per hour. To get a number\n        of returns / rentals per time tier, we multiply the rates by the length\n        of the time tier.\n      </p>\n      <p>\n        The probability of <em>k</em> arrivals / departures during time tier{\" \"}\n        <InlineMath>{`\\\\tau`}</InlineMath> is\n      </p>\n\n      <BlockMath>{`p^{return}_\\\\xi(k, \\\\tau)=\\\\frac{(\\\\lambda_{\\\\xi}(\\\\tau)\\\\cdot|\\\\tau|)^k}{k!}e^{-\\\\lambda_{\\\\xi}(\\\\tau)\\\\cdot|\\\\tau|}`}</BlockMath>\n\n      <p>\n        To validate and compare the Poisson distribution, I will use the{\" \"}\n        <em>empirical distribution</em> of rentals and returns. Both of them are\n        plotted below. The issue is how to calibrate rent rates, as we will\n        observe no or very few rentals at empty stations. Gast et. al. [2] come\n        up with two alternatives: first just ignore days when there is a no bike\n        at a station cluster, second calculate relative occurrence of empty\n        stations and multiply the rates by this factor (e.g. if a cluster is\n        empty 1/3 of the time, if it were never empty the number of rents would\n        be 3/2 higher). I end up using the second approach.\n      </p>\n\n      <div  style={{ width: \"1000px\", marginLeft: \"-150px\", textAlign: \"center\" }}>\n        <RatesMap />\n      </div>\n\n      <div style={{ textAlign: \"justify\" }}>\n        <span className=\"image-desc\">\n          You can choose between 4 different tiers of the day, 104 clusters of\n          stations by clicking on the circles on the map. To see the\n          distributions, you can choose between density and cumulative\n          distribution function. The empirical distribution is based on the\n          data, while the Poisson distribution is based on the estimated rates.\n        </span>\n      </div>\n\n      <h3>5.2. Predicting demand and supply</h3>\n      <p>\n        Knowing the rates we can predict expected (average) number of rentals\n        and returns for each station cluster. On the map below, you can see the\n        expected number of rentals and returns for each station cluster.\n        However, the rates are estimated from April to September which has an\n        average 675 rides per day.\n      </p>\n\n      <div style={{ width: \"1000px\", marginLeft: \"-150px\", textAlign: \"center\" }}>\n        <ul className={\"inline\"}>\n          {[1, 2, 3, 4, 5].map((t) => (\n            <>\n              <li>\n                <input\n                  type={\"radio\"}\n                  value={\"tier\"}\n                  id={`radio-${t}-rates`}\n                  checked={tier === t}\n                  onChange={() => setTier(t)}\n                />\n                <label htmlFor={`radio-${t}-rates`}>{tierMap[t]}</label>\n              </li>\n            </>\n          ))}\n        </ul>\n        <PredictionMap rents={rentTier} returns={returnTier} />\n        <div style={{ textAlign: \"justify\" }}>\n          <span className=\"image-desc\">\n            You can choose between 4 different tiers of the day, 104 clusters of\n            stations by clicking on the circles on the map.\n          </span>\n        </div>\n      </div>\n\n      <h3>5.3. Supply and demand discrepancy</h3>\n      <p>\n        One of the most important goal of this model is to calculate the demand for each station cluster, given\n        the fact that sometimes the cluster might be empty. This creates a discrepancy between supply and demand for\n        each of the station clusters, where supply is not restricted i.e. you can return bike to any station cluster, but\n        you can't rent a bike from an empty station cluster.\n      </p>\n      <p>\n        This discrepancy hints how many possible rides would happened if there was always a bike available to rent at\n        all stations / clusters. In the monitored period (April to September), with the average of 675 rides per day,\n        the <em>hypothetical</em> induced demand would account up to 20% increase in the number of rides. Which is a\n        astonishing number, as it would mean that the demand for bike-sharing is much higher than the\n        supply <sup><a href=\"#induced-demand\">1</a></sup>.\n      </p>\n\n      <h3 className=\"reference\">References:</h3>\n      <ol className=\"reference\">\n        <li>\n          Nicolas Gast, Guillaume Massonnet, Daniël Reijsbergen, Mirco\n          Tribastone. (2015) &nbsp;\n          <em>\n            Probabilistic Forecasts of Bike-Sharing Systems for Journey\n            Planning.\n          </em>\n          &nbsp;The 24th ACM International Conference on Information and\n          Knowledge Management Oct 2015, Melbourne, Australia.\n          ff10.1145/2806416.2806569ff. ffhal-01185840f\n        </li>\n        <li>\n          Richard Durrett. (2016) <em>Essentials of Stochastic Processes</em>.\n          3rd edition 2016. Cham: Springer International Publishing.\n        </li>\n      </ol>\n\n      <ol className=\"foot-notes\">\n        <li id=\"induced-demand\">About 2/3  of those extra rides could happen with the same amount of bikes if they are\n          rebalanced between the stations. So, obviously Rekola could balance bikes\n        in every <em>moment</em> so that there will always at least one bike at each station cluster, which is nearly impossible.\n        Therefore, a more realistic guess would be to look at the tiers independently. If bikes would always be\n        available, then expected number of rents (rides) would be <InlineMath>{`\\\\sum_{\\\\xi}\\\\sum_{\\\\tau}|\\\\tau|\\\\mu_{\\\\xi} \\\\approx 855`}</InlineMath>,\n        which 180 more than the actual rides in the accounted period. If we move bikes from places where more bikes are returned then rented,\n        it would account for <InlineMath>{`\\\\sum_{\\\\xi}\\\\sum_{\\\\tau}|\\\\tau|(\\\\lambda_{\\\\xi} - \\\\mu_{\\\\xi})^+ \\\\approx 120`}</InlineMath>,\n        which is 2/3 of the extra rides. Obviously all of those calculation have to be taken with a large grain of salt,\n        bikes cannot be splitted into smaller pieces (that's what I am implicitly doing here, collecting fractions of unused\n        bikes and rebalancing them across the city).</li>\n      </ol>\n    </>\n  );\n}\n\nexport default StochasticRates;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { InlineMath, BlockMath } from \"react-katex\";\nimport PredictionMap from \"./PredictionMap\";\n\nimport production from \"./data/production.json\";\nimport attractions from \"./data/attractions.json\";\nimport production_summer from \"./data/production_summer.json\";\nimport attractions_summer from \"./data/attractions_summer.json\";\n\nimport rides_prediction from \"./img/rides_prediction.png\";\n\nfunction MarkovChain() {\n  const [totalRides, setTotalRides] = useState(675);\n  const [season, setSeason] = useState(\"summer\");\n\n  const productionRates = season === \"summer\" ? production_summer : production;\n  const attractionsRates = season === \"summer\" ? attractions_summer : attractions;\n\n  return (\n    <>\n      <h2>4. Markov Chains</h2>\n      <p>\n        Fundamentally bikesharing is about the flow of bikes between stations.\n        The flow can be modelled as a{\" \"}\n        <a href={\"https://en.wikipedia.org/wiki/Markov_chain\"}>Markov chain</a>{\" \"}\n        [1], where the probability of a bike moving from one station to another\n        depends only on the current station. The transition matrix is calculated\n        based on historical rides.\n      </p>\n      <p>\n        Formally defined, a Markov chain is a stochastic process with the memoryless property (also called Markov property).\n        The probability of the next state depends only on the current state and not on the sequence of events that preceded it.\n        (i.e. probability of user riding a bike from station A to station B depends only on the current station A\n        regardless where the bike was stationed before arriving to the station A).\n      </p>\n      <p>\n        Let <InlineMath>{`X_k`}</InlineMath> be a state (position of the bike) at time step <InlineMath>{`k`}</InlineMath>,\n        then the Markov property can be written as:\n      </p>\n\n      <BlockMath>{`P(X_{k+1}=j | X_{k}=i,X_{n-1}=i_{k-1}, \\\\dots, X_{0}=i_0)=`}</BlockMath>\n      <BlockMath>{`P(X_{k+1}=j | X_{k}=i) = p_{ij}`}</BlockMath>\n\n      <p>\n        <InlineMath>{`p_{ij}`}</InlineMath> is then called a transition probability from state <InlineMath>{`i`}</InlineMath> to\n        state <InlineMath>{`j`}</InlineMath> (probability of a bike going from station i to station j). All transition\n        probabilities are stored in a matrix called a transition matrix <InlineMath>{`P`}</InlineMath>.\n      </p>\n      <BlockMath>{`P =\n              \\\\begin{pmatrix}\n              p_{11} & p_{12} & \\\\cdots & p_{1n} \\\\\\\\\n              p_{21} & p_{22} & \\\\cdots & p_{2n} \\\\\\\\\n              \\\\vdots & \\\\vdots & \\\\ddots & \\\\vdots \\\\\\\\\n              p_{n1} & p_{n2} & \\\\cdots & p_{nn}\n              \\\\end{pmatrix}`}</BlockMath>\n\n      <h3>4.1. Determining transition matrix based on historical rides</h3>\n      <p>\n        First, to reduce the number of stations, I used previously described &nbsp;<Link to={\"/rekola-clusters\"}>K-mean</Link> clustering,\n        and compound all the stations into <InlineMath>{`n=104`}</InlineMath> clusters.\n      </p>\n      <p>\n        Secondly, to predict number of rents and returns from a given custer, I need to build production and attraction\n        matrices. Let <InlineMath>{`A = a_\\{ij\\}`}</InlineMath> be the attraction matrix where an entry <InlineMath>{`a_\\{ij\\}`}</InlineMath>\n        is number of rides over the observed period from station <InlineMath>{`i`}</InlineMath> to station <InlineMath>{`j`}</InlineMath>.\n        The production matrix <InlineMath>{`B = b_\\{ij\\}`}</InlineMath> is defined analogously. The production matrix is the transpose of the\n        attraction matrix. To calculate the the transition matrix <InlineMath>{`P`}</InlineMath> / <InlineMath>{`Q`}</InlineMath>,\n        I normalized the attraction / production matrix by the sum of each row.\n      </p>\n      <BlockMath>{`p_{ij} = \\\\frac{a_{ij}}{\\\\sum_{i=1}^na_{ij}}`}</BlockMath>\n      <BlockMath>{`q_{ij} = \\\\frac{b_{ij}}{\\\\sum_{i=1}^nb_{ij}}`}</BlockMath>\n      <p>\n        Let's assume that the flow of bikes between stations is aperiodic then for transition matrices it can be calculated\n        its long term distribution of bikes at each station, which is the eigenvector of the transition matrix\n        with eigenvalue 1 or stationary distribution. The eigenvector <InlineMath>{`\\\\pi`}</InlineMath> sums up to 1.\n      </p>\n      <BlockMath>{`\\\\pi P = \\\\pi`}</BlockMath>\n      <BlockMath>{`\\\\hat{\\\\pi} Q = \\\\hat{\\\\pi}`}</BlockMath>\n\n      <p>\n          This approach is based on the work of Zhou et al. [2], where they used a Markov chain based demand prediction\n          model for stations in bike sharing systems in <em>Zhongshan City</em> China.\n      </p>\n\n      <h3>4.2. Predicting number rides per day</h3>\n      <p>\n        In the <Link to={\"/\"}>previous section</Link>, I had showed that the number of rides per day is\n        highly dependent on the day of the week, seasonality and weather, e.g. there is ~0.85 correlation with avg.\n        temperature.\n      </p>\n      <p>\n        To predict the number of rides per day, I used several models including linear regression, random forest,\n        gradient boosting and multilayer neural network with the following features:\n      </p>\n      <ul>\n        <li><strong>Avg. daily temperature</strong> (°C)</li>\n        <li><strong>Min. and max. daily temperature</strong> (°C)</li>\n        <li><strong>Precipitation</strong> (mm)</li>\n        <li><strong>Wind speed and wind gusts</strong> (km/h)</li>\n        <li><strong>Atmospheric pressure</strong> (hPa)</li>\n        <li><strong>Season</strong> (1 - Spring, 2 - Summer, 3 - Fall, 4 - Winter)</li>\n        <li><strong>Month of the year</strong> (1 - January, .., 12 - December)</li>\n        <li><strong>Summer holiday</strong> (0 - No, 1 - Yes)</li>\n        <li><strong>Holiday</strong> (0 - No, 1 - Yes)</li>\n        <li><strong>Workday</strong> (0 - No, 1 - Yes)</li>\n      </ul>\n      <p>\n        The performance of the models was evaluated using the root mean squared error which for the best model was 0.95.\n        On the chart below you can see the actual vs. predicted number of rides per day.\n      </p>\n      <div className={\"center\"}>\n        <img src={rides_prediction} style={{ width: \"1000px\", marginLeft: \"-150px\" }} />\n      </div>\n\n      <h3>4.3. Predicting rents and returns</h3>\n\n      <p>\n        The expected number of daily returns / rents from each station can be\n        calculated by multiplying the production / attraction stationary\n        distribution of probabilities and the total expected number of rides for given day, respectively.\n        Let <InlineMath>{`S`}</InlineMath> be the total number of rides per day, then\n        the expected number of rents and returns for the station <InlineMath>{`i`}</InlineMath> are:\n      </p>\n      <BlockMath>{`\\\\text{Rents}_i = \\\\pi_i \\\\times S`}</BlockMath>\n      <BlockMath>{`\\\\text{Returns}_i = \\\\hat{\\\\pi}_i \\\\times S`}</BlockMath>\n\n      <p>\n        Following map shows the expected returns and rents for each station. The\n        expected number of rides per day can be adjusted in the input field, the\n        default value is 675 rides per day, which is the average number for April to September.\n      </p>\n\n      <div style={{ width: \"1000px\", marginLeft: \"-150px\", textAlign: \"center\" }}>\n        <ul className={\"inline\"}>\n          <li>\n            <label htmlFor={\"total-rides\"}>Expected rides: </label>\n            <input\n              type={\"number\"}\n              id={\"total-rides\"}\n              value={totalRides}\n              style={{ width: \"50px\" }}\n              onChange={(e) => setTotalRides(e.target.value)}\n            />\n          </li>\n          <li>\n            <input\n              type={\"radio\"}\n              value={\"year\"}\n              id={\"radio-year\"}\n              checked={season === \"year\"}\n              onChange={() => setSeason(\"year\")}\n            />\n            <label htmlFor={\"radio-year\"}>Entire year</label>\n          </li>\n          <li>\n            <input\n              type={\"radio\"}\n              value={\"summer\"}\n              id={\"radio-summer\"}\n              checked={season === \"summer\"}\n              onChange={() => setSeason(\"summer\")}\n            />\n            <label htmlFor={\"radio-summer\"}>Summer (Apr.-Sep.)</label>\n          </li>\n        </ul>\n        <PredictionMap\n          rents={productionRates.map((v) => v * totalRides)}\n          returns={attractionsRates.map((v) => v * totalRides)}\n        />\n      </div>\n\n      <span className=\"image-desc\">\n        Expected number of rents and returns for each station is based on the Markov chain model.\n        You can adjust the expected number of rides per day using the input field. The stationary distribution\n        is calculated based on the historical rides, you can choose all values or just rides done in April to September.\n        By clicking on the station you can see the expected number of rents and returns. <br />\n        Hint: To see some discrepancy between the number of rents and returns, try to set the expected number of rides\n        to some large number e.g. 10 000.\n      </span>\n\n      <h3>4.4. Observations</h3>\n      <p>\n        This model is very simple, it averages all the rides over the observed period and assumes that the flow of bikes\n        is going to be the same in the future. It doesn't take into account if the stations are empty or bikes are available.\n        Besides that, the model shows which stations are more popular and which are less popular. </p>\n      <p>\n        Also it uncovers that\n        some stations have a slight discrepancy between the number of rents and returns, which could be due to the fact\n        that Rekola is doing a some sort of rebalancing (or just general bike repairs), some rides aren't recoded. Finding\n        some positive discrepancy on the rent site would suggest that if Rekola rebalances the bikes here it could increase\n        the number of rides. On the other hand, finding a negative discrepancy on the rent site would suggest that Rekola\n        should move some bikes from this station to another (ideally once with positive rent discrepancy).\n      </p>\n\n      <h3 className=\"reference\">References:</h3>\n      <ol className=\"reference\">\n        <li>\n          Richard Durrett. (2016) <em>Essentials of Stochastic Processes</em>.\n          3rd edition 2016. Cham: Springer International Publishing.\n        </li>\n        <li>\n          Yajun Zhou, Lilei Wang, Rong Zhong, and Yulong Tan. (2017)\n          <em>A Markov Chain Based Demand Prediction Model for Stations in Bike Sharing Systems</em>.\n          School of Transportation and Logistics, Southwest Jiaotong University,\n          No. 111 North Second Ring Road, Chengdu, Sichuan 610031, China\n        </li>\n      </ol>\n    </>\n  );\n}\n\nexport default MarkovChain;\n","import React from \"react\";\n\nfunction Home() {\n  return (\n    <>\n      <h2>1. Intro</h2>\n      <p>\n        Rekola [1] is a bike-sharing service operating in Bratislava and some\n        other places in Czech Republic such as Prague. Their signature pink\n        coloured bikes are distributed all over the wider city center and\n        available to registered users for short-term rental (up to 24 hours).\n        Users, then can see and use all the available bikes at the fixed\n        stations.\n      </p>\n\n      <p>\n        In this project I will look at mobility patterns uncovered by Rekola bike-sharing service in Bratislava,\n        describe basic user behaviour within the city boundaries and try to predict the demand for bike-sharing. This\n        project has 4 parts and it is related to my previous project about Bratislava cyclo infrastructure,\n        &nbsp;<a href={\"https://matejker.github.io/cyklo-bratislava/#/\"}>Cyclo Bratislava</a>.\n      </p>\n\n      <p>\n        Firstly, I will take a look at the mobility patterns and describe the data used for the further analysis.\n      </p>\n\n      <p>\n        Secondly, Rekola has a lot of stations in Bratislava. In order to makes some prediction I find it useful to\n        reduce the number of stations. I will describe the clustering methods used to reduce the number of stations.\n      </p>\n\n      <p>\n        Thirdly, to give some sort of idea where bikes are rented and returned, I will use Markov chains to describe very\n        basic user behaviour.\n      </p>\n\n      <p>\n        Finally, however the rides are not evenly distributed over the day and the popularity of the stations is chaining\n        over the day, and to better understand the behaviour at the station level I will model each station supply and\n        demand as a stochastic process. More specifically, I will use Poisson process and queueing theory to model the\n        number of bikes arriving and leaving the stations.\n      </p>\n\n      <p>\n        This project tries to provide some basic understanding of the bike-sharing service in Bratislava and hints some\n        ideas how to adjust the number of bikes at the stations to better serve the users.\n      </p>\n\n      <h3 className=\"reference\">References:</h3>\n      <ol className=\"reference\">\n        <li>\n          Rekola Bikesharing SK s.r.o.,&nbsp;\n          <em>\"Rekola - Discover city with Rekola Bikesharing</em>,&nbsp;\n          <a href=\"https://www.rekola.sk/\">link</a>\n        </li>\n      </ol>\n    </>\n  );\n}\n\nexport default Home;\n","import React from \"react\";\nimport { HashRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport RekolaRides from \"./RekolaRides\";\nimport RekolaClusters from \"./RekolaClusters\";\nimport StochasticRates from \"./StochasticRates\";\nimport MarkovChain from \"./MarkovChain\";\nimport Home from \"./Home\";\n\nimport github from \"./img/github.png\";\n\nimport \"./main.css\";\nimport \"katex/dist/katex.min.css\";\n\nexport default function App() {\n  return (\n    <Router>\n      <div className=\"App\">\n        <div id=\"main\">\n          <h1>\n            <Link to={\"/\"} className={\"no-style\"}>\n              Rekola Rides\n            </Link>\n          </h1>\n          <em className=\"description\">\n            Mobility patterns in Bratislava and predicting demands for bike-sharing from Rekola\n          </em>\n\n          <h2>Chapters</h2>\n          <ol id={\"chapters\"}>\n            <li>\n              <Link to=\"/\">Intro</Link>\n            </li>\n            <li>\n              <Link to=\"/rekola-rides\">Rekola rides</Link>\n            </li>\n            <li>\n              <Link to=\"/rekola-clusters\">Rekola station clusters</Link>\n            </li>\n            <li>\n              <Link to=\"/markov-chains\">Markov chains</Link>\n            </li>\n            <li>\n              <Link to=\"/stochastic-rates\">Stochastic rates</Link>\n            </li>\n          </ol>\n\n          <Switch>\n            <Route exact path=\"/\">\n              <Home />\n            </Route>\n            <Route exact path=\"/rekola-rides\">\n              <RekolaRides />\n            </Route>\n            <Route path=\"/rekola-clusters\">\n              <RekolaClusters />\n            </Route>\n            <Route path=\"/stochastic-rates\">\n              <StochasticRates />\n            </Route>\n            <Route path=\"/markov-chains\">\n              <MarkovChain />\n            </Route>\n          </Switch>\n        </div>\n        <footer>\n          &copy; Matej Kerekrety 2023 - {new Date().getFullYear()}\n          &nbsp;\n          <a href=\"https://github.com/matejker/cyklo-bratislava\">\n            <img src={github} />\n          </a>\n        </footer>\n      </div>\n    </Router>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}